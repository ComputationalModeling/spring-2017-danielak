<html>
<head>
  <title>Timeline</title>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="TimelineStyle.css">
  <link rel="stylesheet" type="text/css" href="prism.css">
  <link rel="stylesheet" type="text/css" href="bootstrap.css">
</head>
<body class="pad-body-for-navbar">
  <table>
    <tr>
        <td id="9956135f39f0f41385c261765774b10ab8164e21">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 13 15:26:16 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">9956135f3</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="1,2,3,4,5,6,7"><code> #include &lt;stdio.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   printf(&quot;test&quot;);
   return 0;
 }</code>
          </div>
          </pre>
        </td>
        <td id="a190e85d148394f0b23308904c6792cd68e882d9">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 13 15:46:44 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">a190e85d1</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="2,6,7,8,10,11,12,13,14,15,16,17,18"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   printf(&quot;%d&quot;, numberOfStops);
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="cd6a2060bc45ff53b45fdb27474ba635d29a49e2">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 13 17:24:47 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">cd6a2060b</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="8,9,10,11,12,13,14,15"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* To Simulate a Public Bus System
        Process passengers who arrive at stops during that timestep;
        Unload the bus of passengers who need to get off;
        Load the bus with passengers at that stop;
        Move the bus to the next stop;
   */
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="366d3b41239197b1ed2925cf9db340b1e0294b42">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 13 17:25:59 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">366d3b412</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="9,10,11,12,13,14,15,16,17,18"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
      Process passengers who arrive at stops during that timestep;
      Unload the bus of passengers who need to get off;
      Load the bus with passengers at that stop;
      Move the bus to the next stop;
   */
   
   /*
   
   */
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="a823a42497bf130410694c3d469f1d9e3000d434">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 13 17:28:06 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">a823a4249</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="18,19,20,21"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
      Process passengers who arrive at stops during that timestep;
      Unload the bus of passengers who need to get off;
      Load the bus with passengers at that stop;
      Move the bus to the next stop;
   */
   
   /*
   To Process passengers who arrive
     Read a line from the input file;
     Parse the line to create a waiting_passenger node;
     Add the waiting_passenger to the waiting line at that stop;
   */
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="a5a480070870080875c6fd2dd8c046aaac469ac5">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 13 17:28:41 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">a5a480070</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="21"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
      Process passengers who arrive at stops during that timestep;
      Unload the bus of passengers who need to get off;
      Load the bus with passengers at that stop;
      Move the bus to the next stop;
   
   To Process passengers who arrive
     Read a line from the input file;
     Parse the line to create a waiting_passenger node;
     Add the waiting_passenger to the waiting line at that stop;
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="173eb5dbde1f6d33a81b61960405eac7ee91fc17">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 13 21:22:57 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">173eb5dbd</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="17,18,19,20,21,22,23"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
      Process passengers who arrive at stops during that timestep;
      Unload the bus of passengers who need to get off;
      Load the bus with passengers at that stop;
      Move the bus to the next stop;
   
   To Process passengers who arrive
     While (store file position with fgetpos()) &amp;&amp; 
           (fscanf matches three formatted digits) &amp;&amp; 
           (the first matched digit == the current time_step);
       Add the passenger to the waiting structure;
     If (you're at the end of the file (fscanf returns 1))
       Set the end_of_file flag
     Reset the file position (fsetpos());
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="b8dfb27abfe2d76c25e49deff992f477e3737c1b">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 13 21:30:02 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">b8dfb27ab</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="11,12,13,14,26,28"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
      Open the passenger list;
      Get the number of bus stops to simulate;
      Build the bus stops;
      Create the bus and initialize it at stop #0;
      Process passengers who arrive at stops during that timestep;
      Unload the bus of passengers who need to get off;
      Load the bus with passengers at that stop;
      Move the bus to the next stop;
   
   To Process passengers who arrive
     While (store file position with fgetpos()) &amp;&amp; 
           (fscanf matches three formatted digits) &amp;&amp; 
           (the first matched digit == the current time_step);
       Add the passenger to the waiting structure;
     If (you're at the end of the file (fscanf returns 1))
       Set the end_of_file flag;
     Reset the file position (fsetpos());
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="531b4fdeb8d426a69b214ef8cdb96c4bcffd4f82">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 13 21:37:41 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">531b4fdeb</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="11,12,13,14,15,16,17,18,19,20,21,22"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     Open the passenger list;
     Get the number of bus stops to simulate;
     Build the bus stops;
     Create the bus and initialize it at stop #0;
     Run the simulation
     Process passengers who arrive at stops during that timestep;
     Unload the bus of passengers who need to get off;
     Load the bus with passengers at that stop;
     Move the bus to the next stop;
   
   To build the bus stops
     create an array of bus stops;
   
   To Process passengers who arrive
     While (store file position with fgetpos()) &amp;&amp; 
           (fscanf matches three formatted digits) &amp;&amp; 
           (the first matched digit == the current time_step);
       Add the passenger to the waiting structure;
     If (you're at the end of the file (fscanf returns 1))
       Set the end_of_file flag;
     Reset the file position (fsetpos());
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="13ef31b19c5fbb75f123e069ac95e738f178144b">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 13 21:45:35 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">13ef31b19</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="15"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     Open the passenger list;
     Get the number of bus stops to simulate;
     Build the bus stops;
     Create the bus and initialize it at stop #0;
     Open a log file;
     Run the simulation
     Process passengers who arrive at stops during that timestep;
     Unload the bus of passengers who need to get off;
     Load the bus with passengers at that stop;
     Move the bus to the next stop;
   
   To build the bus stops
     create an array of bus stops;
   
   To Process passengers who arrive
     While (store file position with fgetpos()) &amp;&amp; 
           (fscanf matches three formatted digits) &amp;&amp; 
           (the first matched digit == the current time_step);
       Add the passenger to the waiting structure;
     If (you're at the end of the file (fscanf returns 1))
       Set the end_of_file flag;
     Reset the file position (fsetpos());
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="2f8da8e1882b7357ec52f7b54249c7e2792cde5c">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 13 21:54:17 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">2f8da8e18</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="15,17,18,19,20,21,22,23,24,25,26,27,40"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     Open the passenger list;
     Get the number of bus stops to simulate;
     Build the bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Step through the simulation;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
   
   
   To build the bus stops
     create an array of bus stops;
   
   To Process passengers who arrive
     While (store file position with fgetpos()) &amp;&amp; 
           (fscanf matches three formatted digits) &amp;&amp; 
           (the first matched digit == the current time_step);
       Add the passenger to the waiting structure;
     If (you're at the end of the file (fscanf returns 1))
       Set the end_of_file flag;
     Reset the file position (fsetpos());
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="b0243c0ae25fe28d146ff9f9ab45fa52decf6511">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 13 21:55:22 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">b0243c0ae</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="13,27"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     Open the passenger list;
     Get the number of bus stops to simulate;
     Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Step through the simulation;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To Process passengers who arrive
     While (store file position with fgetpos()) &amp;&amp; 
           (fscanf matches three formatted digits) &amp;&amp; 
           (the first matched digit == the current time_step);
       Add the passenger to the waiting structure;
     If (you're at the end of the file (fscanf returns 1))
       Set the end_of_file flag;
     Reset the file position (fsetpos());
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="785cbb1ad11cb0709ae288b43da40011d3c63666">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 13 21:58:05 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">785cbb1ad</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="28,29,30,31,32,33"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     Open the passenger list;
     Get the number of bus stops to simulate;
     Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Step through the simulation;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     While (store file position with fgetpos()) &amp;&amp; 
           (fscanf matches three formatted digits) &amp;&amp; 
           (the first matched digit == the current time_step);
       Add the passenger to the waiting structure;
     If (you're at the end of the file (fscanf returns 1))
       Set the end_of_file flag;
     Reset the file position (fsetpos());
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="8dafc4ebf1359114dbf2f5139ffc3d8b434a2c4a">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 13 21:59:08 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">8dafc4ebf</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="17"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     Open the passenger list;
     Get the number of bus stops to simulate;
     Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     While (store file position with fgetpos()) &amp;&amp; 
           (fscanf matches three formatted digits) &amp;&amp; 
           (the first matched digit == the current time_step);
       Add the passenger to the waiting structure;
     If (you're at the end of the file (fscanf returns 1))
       Set the end_of_file flag;
     Reset the file position (fsetpos());
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="b492bed5762cc71be2ac2403063d395680c11b07">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 13 22:44:43 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">b492bed57</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="43,44,45,46,47,48,49,50"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     Open the passenger list;
     Get the number of bus stops to simulate;
     Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     While (store file position with fgetpos()) &amp;&amp; 
           (fscanf matches three formatted digits) &amp;&amp; 
           (the first matched digit == the current time_step);
       Add the passenger to the waiting structure;
     If (you're at the end of the file (fscanf returns 1))
       Set the end_of_file flag;
     Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="34f80749511d8099e996a7516f4ab097499aa1ca">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Mon Nov 14 11:12:38 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">34f807495</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="36,37,38,39,40,41,42,43,45,46,47,48,49,53"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     Open the passenger list;
     Get the number of bus stops to simulate;
     Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="e12402e7065b4d414037d34556ff34ce647456ef">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Mon Nov 14 17:32:00 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">e12402e70</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     Open the passenger list;
     Get the number of bus stops to simulate;
     Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
     }
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="bebaa51cf059269df30a5f0aff06a56fe3e4bbfe">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Thu Nov 17 15:07:17 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">bebaa51cf</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="75,76,77,78,79,80,81,82,83,84,85"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     Open the passenger list;
     Get the number of bus stops to simulate;
     Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     // Insert the passenger onto the bus
     // Remove the passenger from the waiting list
     To insert the passenger onto the bus
       cur_waiting = head_waiting;
       cur_waiting-&gt;next = head_bus;
       
     // http://briandk.com/screenshots/MovingPassengersFromWaitingToBus-20111114-174433.png
     // http://briandk.com/screenshots/MoveOnePassengerFromWaitingToBus-20111114-175217.png
     // http://briandk.com/screenshots/MoveOnePassengerFromWaitingToBus2-20111114-180202.png
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="bf7ceaa19f36c32e250f6026105313b0b0a32f24">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Thu Nov 17 15:10:42 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">bf7ceaa19</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="76,77,78,79,80,81,82"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     Open the passenger list;
     Get the number of bus stops to simulate;
     Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="bd9a2eed52bbc6c8bbcc861cb3e797f9ceb15f1d">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Thu Nov 17 16:26:29 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">bd9a2eed5</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="83,84,85"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     Open the passenger list;
     Get the number of bus stops to simulate;
     Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="05110c5c72add801d1abb781ef03e5ee8894ec16">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Thu Nov 17 16:32:47 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">05110c5c7</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="86,87,88,89"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     Open the passenger list;
     Get the number of bus stops to simulate;
     Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_length = Compute transit length
     wait_time = Compute wait time
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="bddb1070f83944d0ea96d87a6628d1e889d39cdf">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sat Nov 19 19:52:06 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">bddb1070f</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="90,91,92,93,94,95,96,97"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     Open the passenger list;
     Get the number of bus stops to simulate;
     Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_length = Compute transit length
     wait_time = Compute wait time
     get_journey_length &lt;- function(origin, destination, total.stops) {
       if (origin &lt; destination) {
         journey &lt;- destination - origin
       } else {
         journey &lt;- destination + (total.stops - origin)
       }
       return(journey)
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="9a90819e9522e025ce0dd81039d78b9af58ee818">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sat Nov 19 19:53:44 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">9a90819e9</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="91,92,93"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     Open the passenger list;
     Get the number of bus stops to simulate;
     Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_length = Compute transit length
     wait_time = Compute wait time
     get_journey_length &lt;- function(origin, destination, total.stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="58cec8393aca2b5e1579e6bb59cc29027b3eb959">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sat Nov 19 22:31:58 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">58cec8393</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="11,12,88,89,90"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="c9b8594982cf11599086ec8c00ed37f6998913a4">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sat Nov 19 22:53:36 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">c9b859498</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="19"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
     Free any remaining dynamically allocated memory;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="0b7ac4e8229bed79c46b406f60706ce119eb7a03">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sat Nov 19 23:10:09 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">0b7ac4e82</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="8,9,15"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   struct bus_stop *stops = malloc(numberOfStops * sizeof(struct bus_stop));
   
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
     Free any remaining dynamically allocated memory;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="5b2eb7e29a5d8985097c2da02f3ff162c8f4a17f">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sat Nov 19 23:12:27 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">5b2eb7e29</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="9,10"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   struct bus_stop *stops = malloc(numberOfStops * sizeof(struct bus_stop));
   struct bus *bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     Create the bus and initialize it at stop #0;
     Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
     Free any remaining dynamically allocated memory;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="714d8df617d8095ed96a88da3d1bddff129a0517">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sat Nov 19 23:20:07 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">714d8df61</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="11,19,20"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   struct bus_stop *stops = malloc(numberOfStops * sizeof(struct bus_stop));
   struct bus *bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   int current_time = 1;
   
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
     Free any remaining dynamically allocated memory;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="8a945f7411c484fe408d9c8168488ccda3f0bcb6">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sat Nov 19 23:22:07 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">8a945f741</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="8,9"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   int current_time = 1;
   
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
     Free any remaining dynamically allocated memory;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="07f091abe798649e074832fe64c0f26668eb0a47">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sat Nov 19 23:26:14 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">07f091abe</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="5,11,12,13,14,15,16"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   current_time = 1;
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   printf(&quot;Current timestep is: %d&quot;, current_time);
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     Open a log file;
     Create a system tracker;
     Step through the simulation;
     Free any remaining dynamically allocated memory;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="010f90d01e19f3b61b9dc352811aaa89e95804e9">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sat Nov 19 23:29:48 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">010f90d01</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="7,25,28"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   current_time = 1;
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="ac965ac335a55f6e944cb2a09ecc7bc26ef57af5">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sat Nov 19 23:35:03 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">ac965ac33</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="13"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="1a985f680345946c827c56c25c90c1b82537de09">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sat Nov 19 23:51:49 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">1a985f680</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="27"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     # Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file &amp;&amp; waiting_passengers &gt; 0 &amp;&amp; riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="3875fbb9856bc7ba1da8f4370a119938a0592c01">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sat Nov 19 23:53:18 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">3875fbb98</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="32"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     # Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file || waiting_passengers &gt; 0 || riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="b5417cc071c9106b06637c401d335eff38c584ab">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sat Nov 19 23:54:12 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">b5417cc07</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="12,15,16,17,18,19,20,21"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   
 }
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     # Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file || waiting_passengers &gt; 0 || riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="38f4ba07f43230759cc867f7cbf317b17f3202b5">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sat Nov 19 23:56:03 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">38f4ba07f</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="20,21,22,23,24"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;total_time           = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     # Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file || waiting_passengers &gt; 0 || riding passengers &gt; 0)
       Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   To print the state of the system
     Print the current time step;
     Print the current bus stop;
     Print the current number of riders;
     For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="5afac7e6a6015ad89e543a588b9a1cdea0ff8ba5">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 00:04:03 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">5afac7e6a</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,47,63,70,71,72,73,74,153"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;total_time           = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %d ***\n&quot;, current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void RunSimulator() {
   // while (!feof(passengerFile)            ||
   //        bus-&gt;number_of_passengers &gt; 0   ||
   //        tracker-&gt;waiting_passengers &gt; 0
   // ) {
   PrintSystemState();
   
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     # Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file || waiting_passengers &gt; 0 || riding passengers &gt; 0)
       # Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   # To print the state of the system
     # Print the current time step;
     # Print the current bus stop;
     # Print the current number of riders;
     # For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="9404a9ac1f9d1fef642b2772c85847de8cc08a9f">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 00:22:52 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">9404a9ac1</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,63"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;total_time           = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %d ***\n&quot;, current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == current_time)) {;
     printf(&quot;Add the passenger to the waiting structure\n&quot;);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void RunSimulator() {
   // while (!feof(passengerFile)            ||
   //        bus-&gt;number_of_passengers &gt; 0   ||
   //        tracker-&gt;waiting_passengers &gt; 0
   // ) {
   PrintSystemState();
   ProcessArrivingPassengers();
   
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     # Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file || waiting_passengers &gt; 0 || riding passengers &gt; 0)
       # Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   # To print the state of the system
     # Print the current time step;
     # Print the current bus stop;
     # Print the current number of riders;
     # For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="ad44673a09b86f4e260259513a378b992ead7c60">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 00:24:14 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">ad44673a0</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="67,68,69,70,71,75"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;total_time           = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %d ***\n&quot;, current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == current_time)) {;
     printf(&quot;Add the passenger to the waiting structure\n&quot;);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void RunSimulator() {
   // while (!feof(passengerFile)            ||
   //        bus-&gt;number_of_passengers &gt; 0   ||
   //        tracker-&gt;waiting_passengers &gt; 0
   // ) {
   PrintSystemState();
   ProcessArrivingPassengers();
   
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   TearDown();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     # Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file || waiting_passengers &gt; 0 || riding passengers &gt; 0)
       # Print the state of the system;
       Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   # To print the state of the system
     # Print the current time step;
     # Print the current bus stop;
     # Print the current number of riders;
     # For each bus stop in numberOfStops, print the passengers waiting;
   
   To Process passengers who arrive
     int origin;
     int destination;
     int arrival;
     
     prev_pos = store file position with fgetpos()
     current_line = fscanf(&quot;%d %d %d&quot;, )
     
     While ((!feof(file)) &amp;&amp; (arrival == current_time));
       Add the passenger to the waiting structure;
       prev_pos = store file position with fgetpos()
       current_line = fscanf(&quot;%d %d %d&quot;, )
     
     If (!feof(file))
       Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="c922e56b99bbe310b624365a0542e4f795f2f2e6">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 00:49:47 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">c922e56b9</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="13,47,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,110,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;total_time           = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %d ***\n&quot;, current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   new_passenger = malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = &amp;new_passenger;
   tracker-&gt;waiting_passengers++;
   
   /*
   new_passenger-&gt;next = head;
   head = &amp;new_passenger;
   increment the waiting passengers;
   */
 }
 
 void RunSimulator() {
   // while (!feof(passengerFile)            ||
   //        bus-&gt;number_of_passengers &gt; 0   ||
   //        tracker-&gt;waiting_passengers &gt; 0
   // ) {
   PrintSystemState();
   ProcessArrivingPassengers();
   
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   TearDown();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     # Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file || waiting_passengers &gt; 0 || riding passengers &gt; 0)
       # Print the state of the system;
       # Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   # To print the state of the system
     # Print the current time step;
     # Print the current bus stop;
     # Print the current number of riders;
     # For each bus stop in numberOfStops, print the passengers waiting;
   
   # To Process passengers who arrive
     # int origin;
     # int destination;
     # int arrival;
     # 
     # prev_pos = store file position with fgetpos()
     # current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # While ((!feof(file)) &amp;&amp; (arrival == current_time));
     # Add the passenger to the waiting structure;
     #   prev_pos = store file position with fgetpos()
     #   current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # If (!feof(file))
     #   Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="4135117599d59d41be16f508543f386e16f70212">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 13:17:21 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">413511759</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="59,65,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;total_time           = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %d ***\n&quot;, current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = (struct passenger*) &amp;new_passenger;
   tracker-&gt;waiting_passengers++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture stats
       if (cur == bus-&gt;riders)   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next; // make the next passenger the new head of the riders linked list
       prev-&gt;next = cur-&gt;next;
       free(cur);
       cur = prev-&gt;next;
     } else {
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void RunSimulator() {
   // while (!feof(passengerFile)            ||
   //        bus-&gt;number_of_passengers &gt; 0   ||
   //        tracker-&gt;waiting_passengers &gt; 0
   // ) {
   PrintSystemState();
   ProcessArrivingPassengers();
   
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   TearDown();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     # Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file || waiting_passengers &gt; 0 || riding passengers &gt; 0)
       # Print the state of the system;
       # Process passengers who arrive at stops during that timestep;
       Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   # To print the state of the system
     # Print the current time step;
     # Print the current bus stop;
     # Print the current number of riders;
     # For each bus stop in numberOfStops, print the passengers waiting;
   
   # To Process passengers who arrive
     # int origin;
     # int destination;
     # int arrival;
     # 
     # prev_pos = store file position with fgetpos()
     # current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # While ((!feof(file)) &amp;&amp; (arrival == current_time));
     # Add the passenger to the waiting structure;
     #   prev_pos = store file position with fgetpos()
     #   current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # If (!feof(file))
     #   Reset the file position (fsetpos());
     
   To add a passenger to the waiting structure;
     Create new_passenger structure;
     Compute passenger stats;
     new_passenger-&gt;next = head;
     head = &amp;new_passenger;
     increment the waiting passengers;
     
   To unload passengers
     cur = head
     prev = head
     while (cur != null)
       if (cur-&gt;dest == cur_stop) {
         // capture stats
         if (cur == head)
           head = cur-&gt;next
         prev-&gt;next = cur-&gt;next
         free(cur)
         cur = prev-&gt;next
       } else {
         prev = cur
         cur = cur-&gt;next
       }
     //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="0f5393f935b8e318d02fc51db170eae13fc8c0e1">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 13:19:24 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">0f5393f93</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="66,126,153,154,155,156,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;total_time           = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %d ***\n&quot;, current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = (struct passenger*) &amp;new_passenger;
   
   tracker-&gt;waiting_passengers++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture stats
       if (cur == bus-&gt;riders)   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next; // make the next passenger the new head of the riders linked list
       prev-&gt;next = cur-&gt;next;
       free(cur);
       cur = prev-&gt;next;
     } else {
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void RunSimulator() {
   // while (!feof(passengerFile)            ||
   //        bus-&gt;number_of_passengers &gt; 0   ||
   //        tracker-&gt;waiting_passengers &gt; 0
   // ) {
   PrintSystemState();
   ProcessArrivingPassengers();
   
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   TearDown();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     # Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file || waiting_passengers &gt; 0 || riding passengers &gt; 0)
       # Print the state of the system;
       # Process passengers who arrive at stops during that timestep;
       # Unload the bus of passengers who need to get off;
       Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   # To print the state of the system
     # Print the current time step;
     # Print the current bus stop;
     # Print the current number of riders;
     # For each bus stop in numberOfStops, print the passengers waiting;
   
   # To Process passengers who arrive
     # int origin;
     # int destination;
     # int arrival;
     # 
     # prev_pos = store file position with fgetpos()
     # current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # While ((!feof(file)) &amp;&amp; (arrival == current_time));
     # Add the passenger to the waiting structure;
     #   prev_pos = store file position with fgetpos()
     #   current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # If (!feof(file))
     #   Reset the file position (fsetpos());
     
   # To add a passenger to the waiting structure;
     # Create new_passenger structure;
     # Compute passenger stats;
     # new_passenger-&gt;next = head;
     # head = &amp;new_passenger;
     # increment the waiting passengers;
     
   # To unload passengers
     # cur = head
     # prev = head
     # while (cur != null)
     #   if (cur-&gt;dest == cur_stop) {
     #     // capture stats
     #     if (cur == head)
     #       head = cur-&gt;next
     #     prev-&gt;next = cur-&gt;next
     #     free(cur)
     #     cur = prev-&gt;next
     #   } else {
     #     prev = cur
     #     cur = cur-&gt;next
     #   }
     # //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   To Load waiting passengers from a stop
     if (head_waiting != NULL) {
       temp_ptr = head_waiting-&gt;next;
       head_waiting-&gt;next = head_bus;
       head_bus = head_waiting;
       head_waiting = temp_ptr;
     }
     // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="02b06b22df8c0db31001418650d9fbaef6fdbc41">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 13:52:48 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">02b06b22d</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="90,91,92,93,94,95,96,97,98,99,100,101,109,110,111,142,192,193,194,195,196,197,198,199"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;total_time           = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %d ***\n&quot;, current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = (struct passenger*) &amp;new_passenger;
   
   tracker-&gt;waiting_passengers++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture stats
       if (cur == bus-&gt;riders)   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next; // make the next passenger the new head of the riders linked list
       prev-&gt;next = cur-&gt;next;
       free(cur);
       cur = prev-&gt;next;
     } else {
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
   }
 }
 
 
 void RunSimulator() {
   // while (!feof(passengerFile)            ||
   //        bus-&gt;number_of_passengers &gt; 0   ||
   //        tracker-&gt;waiting_passengers &gt; 0
   // ) {
   PrintSystemState();
   ProcessArrivingPassengers();
   UnloadPassengers();
   LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
   
   
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   TearDown();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     # Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file || waiting_passengers &gt; 0 || riding passengers &gt; 0)
       # Print the state of the system;
       # Process passengers who arrive at stops during that timestep;
       # Unload the bus of passengers who need to get off;
       # Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   # To print the state of the system
     # Print the current time step;
     # Print the current bus stop;
     # Print the current number of riders;
     # For each bus stop in numberOfStops, print the passengers waiting;
   
   # To Process passengers who arrive
     # int origin;
     # int destination;
     # int arrival;
     # 
     # prev_pos = store file position with fgetpos()
     # current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # While ((!feof(file)) &amp;&amp; (arrival == current_time));
     # Add the passenger to the waiting structure;
     #   prev_pos = store file position with fgetpos()
     #   current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # If (!feof(file))
     #   Reset the file position (fsetpos());
     
   # To add a passenger to the waiting structure;
     # Create new_passenger structure;
     # Compute passenger stats;
     # new_passenger-&gt;next = head;
     # head = &amp;new_passenger;
     # increment the waiting passengers;
     
   # To unload passengers
     # cur = head
     # prev = head
     # while (cur != null)
     #   if (cur-&gt;dest == cur_stop) {
     #     // capture stats
     #     if (cur == head)
     #       head = cur-&gt;next
     #     prev-&gt;next = cur-&gt;next
     #     free(cur)
     #     cur = prev-&gt;next
     #   } else {
     #     prev = cur
     #     cur = cur-&gt;next
     #   }
     # //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   # To Load waiting passengers from a stop
     # if (head_waiting != NULL) {
     #   temp_ptr = head_waiting-&gt;next;
     #   head_waiting-&gt;next = head_bus;
     #   head_bus = head_waiting;
     #   head_waiting = temp_ptr;
     # }
     # // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="00aad5eff79cf55a361d63a1a61d11048bb4c89b">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 14:46:03 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">00aad5eff</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="75,78,79,80,81"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;total_time           = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %d ***\n&quot;, current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = (struct passenger*) &amp;new_passenger;
   
   tracker-&gt;waiting_passengers++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders)   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next; // make the next passenger the new head of the riders linked list
       prev-&gt;next = cur-&gt;next;
       free(cur);
       cur = prev-&gt;next;
     } else {
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
   }
 }
 
 
 void RunSimulator() {
   // while (!feof(passengerFile)            ||
   //        bus-&gt;number_of_passengers &gt; 0   ||
   //        tracker-&gt;waiting_passengers &gt; 0
   // ) {
   PrintSystemState();
   ProcessArrivingPassengers();
   UnloadPassengers();
   LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
   
   
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   TearDown();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     # Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file || waiting_passengers &gt; 0 || riding passengers &gt; 0)
       # Print the state of the system;
       # Process passengers who arrive at stops during that timestep;
       # Unload the bus of passengers who need to get off;
       # Load the bus with passengers at that stop;
       Move the bus to the next stop;
     Print the summary information;
 
   # To print the state of the system
     # Print the current time step;
     # Print the current bus stop;
     # Print the current number of riders;
     # For each bus stop in numberOfStops, print the passengers waiting;
   
   # To Process passengers who arrive
     # int origin;
     # int destination;
     # int arrival;
     # 
     # prev_pos = store file position with fgetpos()
     # current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # While ((!feof(file)) &amp;&amp; (arrival == current_time));
     # Add the passenger to the waiting structure;
     #   prev_pos = store file position with fgetpos()
     #   current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # If (!feof(file))
     #   Reset the file position (fsetpos());
     
   # To add a passenger to the waiting structure;
     # Create new_passenger structure;
     # Compute passenger stats;
     # new_passenger-&gt;next = head;
     # head = &amp;new_passenger;
     # increment the waiting passengers;
     
   # To unload passengers
     # cur = head
     # prev = head
     # while (cur != null)
     #   if (cur-&gt;dest == cur_stop) {
     #     // capture stats
     #     if (cur == head)
     #       head = cur-&gt;next
     #     prev-&gt;next = cur-&gt;next
     #     free(cur)
     #     cur = prev-&gt;next
     #   } else {
     #     prev = cur
     #     cur = cur-&gt;next
     #   }
     # //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   # To Load waiting passengers from a stop
     # if (head_waiting != NULL) {
     #   temp_ptr = head_waiting-&gt;next;
     #   head_waiting-&gt;next = head_bus;
     #   head_bus = head_waiting;
     #   head_waiting = temp_ptr;
     # }
     # // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   To move the bus to the next stop
     current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="f01f9b4c1486cfa063c750e7e8179b1215e96661">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 14:50:10 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">f01f9b4c1</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="115,148,206,207"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;total_time           = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %d ***\n&quot;, current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = (struct passenger*) &amp;new_passenger;
   
   tracker-&gt;waiting_passengers++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders)   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next; // make the next passenger the new head of the riders linked list
       prev-&gt;next = cur-&gt;next;
       free(cur);
       cur = prev-&gt;next;
     } else {
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
   }
 }
 
 
 void RunSimulator() {
   // while (!feof(passengerFile)            ||
   //        bus-&gt;number_of_passengers &gt; 0   ||
   //        tracker-&gt;waiting_passengers &gt; 0
   // ) {
   PrintSystemState();
   ProcessArrivingPassengers();
   UnloadPassengers();
   LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
   bus-&gt;current_stop = (current_stop + 1) % number_of_stops;
   
   
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   TearDown();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     # Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file || waiting_passengers &gt; 0 || riding passengers &gt; 0)
       # Print the state of the system;
       # Process passengers who arrive at stops during that timestep;
       # Unload the bus of passengers who need to get off;
       # Load the bus with passengers at that stop;
       # Move the bus to the next stop;
     Print the summary information;
 
   # To print the state of the system
     # Print the current time step;
     # Print the current bus stop;
     # Print the current number of riders;
     # For each bus stop in numberOfStops, print the passengers waiting;
   
   # To Process passengers who arrive
     # int origin;
     # int destination;
     # int arrival;
     # 
     # prev_pos = store file position with fgetpos()
     # current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # While ((!feof(file)) &amp;&amp; (arrival == current_time));
     # Add the passenger to the waiting structure;
     #   prev_pos = store file position with fgetpos()
     #   current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # If (!feof(file))
     #   Reset the file position (fsetpos());
     
   # To add a passenger to the waiting structure;
     # Create new_passenger structure;
     # Compute passenger stats;
     # new_passenger-&gt;next = head;
     # head = &amp;new_passenger;
     # increment the waiting passengers;
     
   # To unload passengers
     # cur = head
     # prev = head
     # while (cur != null)
     #   if (cur-&gt;dest == cur_stop) {
     #     // capture stats
     #     if (cur == head)
     #       head = cur-&gt;next
     #     prev-&gt;next = cur-&gt;next
     #     free(cur)
     #     cur = prev-&gt;next
     #   } else {
     #     prev = cur
     #     cur = cur-&gt;next
     #   }
     # //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   # To Load waiting passengers from a stop
     # if (head_waiting != NULL) {
     #   temp_ptr = head_waiting-&gt;next;
     #   head_waiting-&gt;next = head_bus;
     #   head_bus = head_waiting;
     #   head_waiting = temp_ptr;
     # }
     # // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   # To move the bus to the next stop
     # current_stop = (current_stop + 1) % number_of_stops;
     
   To compute passenger stats
     transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     get_journey_length &lt;- function(origin, destination, total_stops) {
       return(
         (destination + (total.stops - origin)) %% total.stops
       )
     }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="4497fc70a1b5fcd0cc50f230773fecda681f2fdc">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 14:50:52 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">4497fc70a</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="209,210,211,212,213,214,215,216"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;total_time           = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %d ***\n&quot;, current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = (struct passenger*) &amp;new_passenger;
   
   tracker-&gt;waiting_passengers++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders)   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next; // make the next passenger the new head of the riders linked list
       prev-&gt;next = cur-&gt;next;
       free(cur);
       cur = prev-&gt;next;
     } else {
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
   }
 }
 
 
 void RunSimulator() {
   // while (!feof(passengerFile)            ||
   //        bus-&gt;number_of_passengers &gt; 0   ||
   //        tracker-&gt;waiting_passengers &gt; 0
   // ) {
   PrintSystemState();
   ProcessArrivingPassengers();
   UnloadPassengers();
   LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
   bus-&gt;current_stop = (current_stop + 1) % number_of_stops;
   
   
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   TearDown();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     # Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file || waiting_passengers &gt; 0 || riding passengers &gt; 0)
       # Print the state of the system;
       # Process passengers who arrive at stops during that timestep;
       # Unload the bus of passengers who need to get off;
       # Load the bus with passengers at that stop;
       # Move the bus to the next stop;
     Print the summary information;
 
   # To print the state of the system
     # Print the current time step;
     # Print the current bus stop;
     # Print the current number of riders;
     # For each bus stop in numberOfStops, print the passengers waiting;
   
   # To Process passengers who arrive
     # int origin;
     # int destination;
     # int arrival;
     # 
     # prev_pos = store file position with fgetpos()
     # current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # While ((!feof(file)) &amp;&amp; (arrival == current_time));
     # Add the passenger to the waiting structure;
     #   prev_pos = store file position with fgetpos()
     #   current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # If (!feof(file))
     #   Reset the file position (fsetpos());
     
   # To add a passenger to the waiting structure;
     # Create new_passenger structure;
     # Compute passenger stats;
     # new_passenger-&gt;next = head;
     # head = &amp;new_passenger;
     # increment the waiting passengers;
     
   # To unload passengers
     # cur = head
     # prev = head
     # while (cur != null)
     #   if (cur-&gt;dest == cur_stop) {
     #     // capture stats
     #     if (cur == head)
     #       head = cur-&gt;next
     #     prev-&gt;next = cur-&gt;next
     #     free(cur)
     #     cur = prev-&gt;next
     #   } else {
     #     prev = cur
     #     cur = cur-&gt;next
     #   }
     # //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   # To Load waiting passengers from a stop
     # if (head_waiting != NULL) {
     #   temp_ptr = head_waiting-&gt;next;
     #   head_waiting-&gt;next = head_bus;
     #   head_bus = head_waiting;
     #   head_waiting = temp_ptr;
     # }
     # // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   # To move the bus to the next stop
     # current_stop = (current_stop + 1) % number_of_stops;
     
   # To compute passenger stats
     # transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     # wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     # get_journey_length &lt;- function(origin, destination, total_stops) {
     #   return(
     #     (destination + (total.stops - origin)) %% total.stops
     #   )
     # }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="143968dae8a96f1a44e182d72ab3b2ceacc176a9">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 15:23:38 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">143968dae</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="115,116,117,118,119,120,121,122,123,124,135"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;total_time           = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %d ***\n&quot;, current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = (struct passenger*) &amp;new_passenger;
   
   tracker-&gt;waiting_passengers++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders)   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next; // make the next passenger the new head of the riders linked list
       prev-&gt;next = cur-&gt;next;
       free(cur);
       cur = prev-&gt;next;
     } else {
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
   }
 }
 
 
 void RunSimulator() {
   // while (!feof(passengerFile)            ||
   //        bus-&gt;number_of_passengers &gt; 0   ||
   //        tracker-&gt;waiting_passengers &gt; 0
   // ) {
   PrintSystemState();
   ProcessArrivingPassengers();
   UnloadPassengers();
   LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
   bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
   tracker-&gt;total_time++;
 }
 
 void PrintSummaryInformation() {
   printf(&quot;Total sim time:  %.0f\n&quot;, tracker-&gt;total_time);
   printf(&quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   printf(&quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;total_time);
   printf(&quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   printf(&quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();
   
   /* 
   To Simulate a Public Bus System
     # Open the passenger list;
     # Get the number of bus stops to simulate;
     # Create an array of bus stops;
     # Create the bus and initialize it at stop #0;
     # Create a timestep and initialize it to 1;
     # Open a log file;
     # Create a system tracker;
     Step through the simulation;
     Tear-down: Free any remaining dynamically allocated memory and close open file-pointers;
   
   To step through the simulation
     While (it's not end_of_file || waiting_passengers &gt; 0 || riding passengers &gt; 0)
       # Print the state of the system;
       # Process passengers who arrive at stops during that timestep;
       # Unload the bus of passengers who need to get off;
       # Load the bus with passengers at that stop;
       # Move the bus to the next stop;
     Print the summary information;
 
   # To print the state of the system
     # Print the current time step;
     # Print the current bus stop;
     # Print the current number of riders;
     # For each bus stop in numberOfStops, print the passengers waiting;
   
   # To Process passengers who arrive
     # int origin;
     # int destination;
     # int arrival;
     # 
     # prev_pos = store file position with fgetpos()
     # current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # While ((!feof(file)) &amp;&amp; (arrival == current_time));
     # Add the passenger to the waiting structure;
     #   prev_pos = store file position with fgetpos()
     #   current_line = fscanf(&quot;%d %d %d&quot;, )
     # 
     # If (!feof(file))
     #   Reset the file position (fsetpos());
     
   # To add a passenger to the waiting structure;
     # Create new_passenger structure;
     # Compute passenger stats;
     # new_passenger-&gt;next = head;
     # head = &amp;new_passenger;
     # increment the waiting passengers;
     
   # To unload passengers
     # cur = head
     # prev = head
     # while (cur != null)
     #   if (cur-&gt;dest == cur_stop) {
     #     // capture stats
     #     if (cur == head)
     #       head = cur-&gt;next
     #     prev-&gt;next = cur-&gt;next
     #     free(cur)
     #     cur = prev-&gt;next
     #   } else {
     #     prev = cur
     #     cur = cur-&gt;next
     #   }
     # //      http://DrDoane.com/screenshots/skitched-20111114-124924.jpg        
         
   # To Load waiting passengers from a stop
     # if (head_waiting != NULL) {
     #   temp_ptr = head_waiting-&gt;next;
     #   head_waiting-&gt;next = head_bus;
     #   head_bus = head_waiting;
     #   head_waiting = temp_ptr;
     # }
     # // Proof-by-skitch http://BrianDK.com/screenshots/MovePassengerFromWaitingToBus2-20111117-150539.png
     
   # To move the bus to the next stop
     # current_stop = (current_stop + 1) % number_of_stops;
     
   # To compute passenger stats
     # transit_time = get_journey_length(waiting_stop, destination_stop, number_of_stops)
     # wait_time = get_journey_length(current_bus_position, waiting_stop, number_of_stops)
     # get_journey_length &lt;- function(origin, destination, total_stops) {
     #   return(
     #     (destination + (total.stops - origin)) %% total.stops
     #   )
     # }
       
     
   
     
   */
   
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="354df5d80168fce1cfbdaf3edc04617520e8909e">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 15:54:25 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">354df5d80</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="107,108,109,110,111,112,113,114,115,116,117,118,119,139"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   current_time = 1;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;total_time           = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %d ***\n&quot;, current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = (struct passenger*) &amp;new_passenger;
   
   tracker-&gt;waiting_passengers++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders)   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next; // make the next passenger the new head of the riders linked list
       prev-&gt;next = cur-&gt;next;
       free(cur);
       cur = prev-&gt;next;
     } else {
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
   }
 }
 
 
 void RunSimulator() {
   while (tracker-&gt;total_time &lt; 10            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     current_time = current_time + 1;
     printf(&quot;\n\nCURRENT TIME: %d\n\n&quot;, current_time);
     tracker-&gt;total_time++;
   }
 }
 
 void PrintSummaryInformation() {
   printf(&quot;Total sim time:  %.0f\n&quot;, tracker-&gt;total_time);
   printf(&quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   printf(&quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;total_time);
   printf(&quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   printf(&quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="f6c2ad9922e675756b55baca04aa9c9fa87c67f1">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 16:17:26 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">f6c2ad992</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="20,28,45,67,68,108,117,118,123,125"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival ==tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = (struct passenger*) &amp;new_passenger;
   
   tracker-&gt;waiting_passengers++;
   
   printf(&quot;\n\nADDED ARRIVING PASSENGER!\n\n&quot;);
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders)   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next; // make the next passenger the new head of the riders linked list
       prev-&gt;next = cur-&gt;next;
       free(cur);
       cur = prev-&gt;next;
     } else {
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
   }
 }
 
 
 void RunSimulator() {
   while (tracker-&gt;current_time &lt; 10            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     printf(&quot;\n\nCURRENT TIME: %.0f\n\n&quot;, tracker-&gt;current_time);
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSummaryInformation() {
   printf(&quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   printf(&quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   printf(&quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   printf(&quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   printf(&quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="b333c0030a20a096e5aac9ab00db2cc22241456c">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 16:18:44 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">b333c0030</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="5,6,7,8,9,10,11,12,13,14"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival ==tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = (struct passenger*) &amp;new_passenger;
   
   tracker-&gt;waiting_passengers++;
   
   printf(&quot;\n\nADDED ARRIVING PASSENGER!\n\n&quot;);
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders)   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next; // make the next passenger the new head of the riders linked list
       prev-&gt;next = cur-&gt;next;
       free(cur);
       cur = prev-&gt;next;
     } else {
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
   }
 }
 
 void RunSimulator() {
   while (tracker-&gt;current_time &lt; 10            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     printf(&quot;\n\nCURRENT TIME: %.0f\n\n&quot;, tracker-&gt;current_time);
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSummaryInformation() {
   printf(&quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   printf(&quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   printf(&quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   printf(&quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   printf(&quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="85cf4f442324ce81fd255841c3f44b2957a5b1db">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 16:20:39 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">85cf4f442</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="37,38,39,40,41,42,43,44,45,46,47,48,49,50,51"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 void RunSimulator() {
   while (tracker-&gt;current_time &lt; 10            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     printf(&quot;\n\nCURRENT TIME: %.0f\n\n&quot;, tracker-&gt;current_time);
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival ==tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = (struct passenger*) &amp;new_passenger;
   
   tracker-&gt;waiting_passengers++;
   
   printf(&quot;\n\nADDED ARRIVING PASSENGER!\n\n&quot;);
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders)   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next; // make the next passenger the new head of the riders linked list
       prev-&gt;next = cur-&gt;next;
       free(cur);
       cur = prev-&gt;next;
     } else {
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
   }
 }
 
 void PrintSummaryInformation() {
   printf(&quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   printf(&quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   printf(&quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   printf(&quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   printf(&quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }</code>
          </div>
          </pre>
        </td>
        <td id="8203757d361a0ab8107b14804a42fbb93a06a390">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 16:21:50 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">8203757d3</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="37,38,39,40,41,42,43,44,45"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }
 
 void RunSimulator() {
   while (tracker-&gt;current_time &lt; 10            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     printf(&quot;\n\nCURRENT TIME: %.0f\n\n&quot;, tracker-&gt;current_time);
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival ==tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = (struct passenger*) &amp;new_passenger;
   
   tracker-&gt;waiting_passengers++;
   
   printf(&quot;\n\nADDED ARRIVING PASSENGER!\n\n&quot;);
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders)   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next; // make the next passenger the new head of the riders linked list
       prev-&gt;next = cur-&gt;next;
       free(cur);
       cur = prev-&gt;next;
     } else {
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
   }
 }
 
 void PrintSummaryInformation() {
   printf(&quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   printf(&quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   printf(&quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   printf(&quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   printf(&quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }</code>
          </div>
          </pre>
        </td>
        <td id="e978b3aa170577a0c76e9a9fd644697ba8dd6991">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 19:09:37 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">e978b3aa1</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="77,79"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }
 
 void RunSimulator() {
   while (tracker-&gt;current_time &lt; 10            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     printf(&quot;\n\nCURRENT TIME: %.0f\n\n&quot;, tracker-&gt;current_time);
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = (struct passenger*) &amp;new_passenger;
   
   tracker-&gt;waiting_passengers++;
   
   printf(&quot;\n\nADDED ARRIVING PASSENGER!\n\n&quot;);
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders)   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next; // make the next passenger the new head of the riders linked list
       prev-&gt;next = cur-&gt;next;
       free(cur);
       cur = prev-&gt;next;
     } else {
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
   }
 }
 
 void PrintSummaryInformation() {
   printf(&quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   printf(&quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   printf(&quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   printf(&quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   printf(&quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }</code>
          </div>
          </pre>
        </td>
        <td id="9ed782c32d1cf8d32b8c8cd59fce0502127dc089">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 19:10:23 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">9ed782c32</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="137,138,139,140,141,143"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }
 
 void RunSimulator() {
   while (tracker-&gt;current_time &lt; 10            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     printf(&quot;\n\nCURRENT TIME: %.0f\n\n&quot;, tracker-&gt;current_time);
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = (struct passenger*) &amp;new_passenger;
   
   tracker-&gt;waiting_passengers++;
   
   printf(&quot;\n\nADDED ARRIVING PASSENGER!\n\n&quot;);
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders)   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next; // make the next passenger the new head of the riders linked list
       prev-&gt;next = cur-&gt;next;
       free(cur);
       cur = prev-&gt;next;
     } else {
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
     
     // Update the system to reflect loading the passenger on the bus
     tracker-&gt;waiting_passengers--;
     stops[bus-&gt;current_stop].num_waiting--;
     bus-&gt;number_of_passengers++;
   }
   
 }
 
 void PrintSummaryInformation() {
   printf(&quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   printf(&quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   printf(&quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   printf(&quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   printf(&quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }</code>
          </div>
          </pre>
        </td>
        <td id="1f0c8cbc1e81817ff47899ea5d47575e16f5e2c2">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 20:23:17 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">1f0c8cbc1</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="92,93,99,101,103"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }
 
 void RunSimulator() {
   while (tracker-&gt;current_time &lt; 10            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     printf(&quot;\n\nCURRENT TIME: %.0f\n\n&quot;, tracker-&gt;current_time);
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger; 
   new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = new_passenger;
   
   // Update the system to reflect newly arrived passenger
   tracker-&gt;waiting_passengers++;
   stops[origin].num_waiting++;
   
   printf(&quot;\n\nADDED ARRIVING PASSENGER!\n\n&quot;);
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders)   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next; // make the next passenger the new head of the riders linked list
       prev-&gt;next = cur-&gt;next;
       free(cur);
       cur = prev-&gt;next;
     } else {
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
     
     // Update the system to reflect loading the passenger on the bus
     tracker-&gt;waiting_passengers--;
     stops[bus-&gt;current_stop].num_waiting--;
     bus-&gt;number_of_passengers++;
   }
   
 }
 
 void PrintSummaryInformation() {
   printf(&quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   printf(&quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   printf(&quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   printf(&quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   printf(&quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }</code>
          </div>
          </pre>
        </td>
        <td id="3d4dadca0ac6c777db2ac44d71e5f2e15fa25d64">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 21:10:16 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">3d4dadca0</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="120,121,122,123,124,125,126,127,128,129,130,131,132"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }
 
 void RunSimulator() {
   while (tracker-&gt;current_time &lt; 10            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     printf(&quot;\n\nCURRENT TIME: %.0f\n\n&quot;, tracker-&gt;current_time);
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger; 
   new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = new_passenger;
   
   // Update the system to reflect newly arrived passenger
   tracker-&gt;waiting_passengers++;
   stops[origin].num_waiting++;
   
   printf(&quot;\n\nADDED ARRIVING PASSENGER!\n\n&quot;);
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders) {   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next;  // make the next passenger the new head of the riders linked list
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = bus-&gt;riders;
         prev = bus-&gt;riders;
       } else {
         prev-&gt;next = cur-&gt;next;
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = prev-&gt;next;
       }
     } else { // If this branch executes, the current passenger isn't getting off
       prev = cur;
       cur = cur-&gt;next;
     }
   }
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
     
     // Update the system to reflect loading the passenger on the bus
     tracker-&gt;waiting_passengers--;
     stops[bus-&gt;current_stop].num_waiting--;
     bus-&gt;number_of_passengers++;
   }
   
 }
 
 void PrintSummaryInformation() {
   printf(&quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   printf(&quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   printf(&quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   printf(&quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   printf(&quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }</code>
          </div>
          </pre>
        </td>
        <td id="ecf0b8d90a91046275d4c21333afe8f182b42006">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 21:14:37 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">ecf0b8d90</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="135"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 0;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }
 
 void RunSimulator() {
   while (tracker-&gt;current_time &lt; 10            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger; 
   new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = new_passenger;
   
   // Update the system to reflect newly arrived passenger
   tracker-&gt;waiting_passengers++;
   stops[origin].num_waiting++;
   
   printf(&quot;\n\nADDED ARRIVING PASSENGER!\n\n&quot;);
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders) {   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next;  // make the next passenger the new head of the riders linked list
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = bus-&gt;riders;
         prev = bus-&gt;riders;
       } else {
         prev-&gt;next = cur-&gt;next;
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = prev-&gt;next;
       }
     } else { // If this branch executes, the current passenger isn't getting off
       prev = cur;
       cur = cur-&gt;next;
     }
   } // Proof-by-skitch: http://briandk.com/screenshots/UnloadPassengersFromBus-20111120-211338.png
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
     
     // Update the system to reflect loading the passenger on the bus
     tracker-&gt;waiting_passengers--;
     stops[bus-&gt;current_stop].num_waiting--;
     bus-&gt;number_of_passengers++;
   }
   
 }
 
 void PrintSummaryInformation() {
   printf(&quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   printf(&quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   printf(&quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   printf(&quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   printf(&quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }</code>
          </div>
          </pre>
        </td>
        <td id="235d4798c88c1bbb63e33788d810e7dbb11aacb3">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 21:29:07 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">235d4798c</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="30,47"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 1;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }
 
 void RunSimulator() {
   while (!feof(passengerFile)            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
   printf(&quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
   printf(&quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     printf(&quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger; 
   new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = new_passenger;
   
   // Update the system to reflect newly arrived passenger
   tracker-&gt;waiting_passengers++;
   stops[origin].num_waiting++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders) {   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next;  // make the next passenger the new head of the riders linked list
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = bus-&gt;riders;
         prev = bus-&gt;riders;
       } else {
         prev-&gt;next = cur-&gt;next;
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = prev-&gt;next;
       }
     } else { // If this branch executes, the current passenger isn't getting off
       prev = cur;
       cur = cur-&gt;next;
     }
   } // Proof-by-skitch: http://briandk.com/screenshots/UnloadPassengersFromBus-20111120-211338.png
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
     
     // Update the system to reflect loading the passenger on the bus
     tracker-&gt;waiting_passengers--;
     stops[bus-&gt;current_stop].num_waiting--;
     bus-&gt;number_of_passengers++;
   }
   
 }
 
 void PrintSummaryInformation() {
   printf(&quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   printf(&quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   printf(&quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   printf(&quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   printf(&quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }</code>
          </div>
          </pre>
        </td>
        <td id="204db47d5c5972a2f20ba56c90217f76c5ae8b9a">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 21:33:06 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">204db47d5</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="61,62,65,154,155,156,157,158"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 1;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }
 
 void RunSimulator() {
   while (!feof(passengerFile)            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
  fprintf(logFile, &quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
  fprintf(logFile, &quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
    fprintf(logFile, &quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   fpos_t prev_pos;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger; 
   new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = new_passenger;
   
   // Update the system to reflect newly arrived passenger
   tracker-&gt;waiting_passengers++;
   stops[origin].num_waiting++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders) {   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next;  // make the next passenger the new head of the riders linked list
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = bus-&gt;riders;
         prev = bus-&gt;riders;
       } else {
         prev-&gt;next = cur-&gt;next;
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = prev-&gt;next;
       }
     } else { // If this branch executes, the current passenger isn't getting off
       prev = cur;
       cur = cur-&gt;next;
     }
   } // Proof-by-skitch: http://briandk.com/screenshots/UnloadPassengersFromBus-20111120-211338.png
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
     
     // Update the system to reflect loading the passenger on the bus
     tracker-&gt;waiting_passengers--;
     stops[bus-&gt;current_stop].num_waiting--;
     bus-&gt;number_of_passengers++;
   }
   
 }
 
 void PrintSummaryInformation() {
   fprintf(logFile, &quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   fprintf(logFile, &quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   fprintf(logFile, &quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }</code>
          </div>
          </pre>
        </td>
        <td id="e7003f7248276d887b647a0e1bbeb9c4c6512010">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Sun Nov 20 22:06:38 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">e7003f724</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line=""><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 1;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }
 
 void RunSimulator() {
   while (!feof(passengerFile)            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
  fprintf(logFile, &quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
  fprintf(logFile, &quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
    fprintf(logFile, &quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger; 
   new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = new_passenger;
   
   // Update the system to reflect newly arrived passenger
   tracker-&gt;waiting_passengers++;
   stops[origin].num_waiting++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders) {   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next;  // make the next passenger the new head of the riders linked list
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = bus-&gt;riders;
         prev = bus-&gt;riders;
       } else {
         prev-&gt;next = cur-&gt;next;
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = prev-&gt;next;
       }
     } else { // If this branch executes, the current passenger isn't getting off
       prev = cur;
       cur = cur-&gt;next;
     }
   } // Proof-by-skitch: http://briandk.com/screenshots/UnloadPassengersFromBus-20111120-211338.png
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
     
     // Update the system to reflect loading the passenger on the bus
     tracker-&gt;waiting_passengers--;
     stops[bus-&gt;current_stop].num_waiting--;
     bus-&gt;number_of_passengers++;
   }
   
 }
 
 void PrintSummaryInformation() {
   fprintf(logFile, &quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   fprintf(logFile, &quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   fprintf(logFile, &quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }</code>
          </div>
          </pre>
        </td>
        <td id="030bf10f54e2a8ee5631740d3e1ab6d47d2d09dd">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Mon Nov 21 00:34:39 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">030bf10f5</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="17"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w+&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 1;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }
 
 void RunSimulator() {
   while (!feof(passengerFile)            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
  fprintf(logFile, &quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
  fprintf(logFile, &quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
    fprintf(logFile, &quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger; 
   new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = new_passenger;
   
   // Update the system to reflect newly arrived passenger
   tracker-&gt;waiting_passengers++;
   stops[origin].num_waiting++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders) {   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next;  // make the next passenger the new head of the riders linked list
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = bus-&gt;riders;
         prev = bus-&gt;riders;
       } else {
         prev-&gt;next = cur-&gt;next;
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = prev-&gt;next;
       }
     } else { // If this branch executes, the current passenger isn't getting off
       prev = cur;
       cur = cur-&gt;next;
     }
   } // Proof-by-skitch: http://briandk.com/screenshots/UnloadPassengersFromBus-20111120-211338.png
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
     
     // Update the system to reflect loading the passenger on the bus
     tracker-&gt;waiting_passengers--;
     stops[bus-&gt;current_stop].num_waiting--;
     bus-&gt;number_of_passengers++;
   }
   
 }
 
 void PrintSummaryInformation() {
   fprintf(logFile, &quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   fprintf(logFile, &quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   fprintf(logFile, &quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }</code>
          </div>
          </pre>
        </td>
        <td id="4c78af418be3a0caeea1317518fd4eb608670658">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Mon Nov 21 00:36:54 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">4c78af418</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="84"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w+&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 1;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }
 
 void RunSimulator() {
   while (!feof(passengerFile)            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
  fprintf(logFile, &quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
  fprintf(logFile, &quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
    fprintf(logFile, &quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;origin, &amp;destination, &amp;arrival);
   }
   
   if (!feof(passengerFile)) {
     printf(&quot;\n\nResetting File Position to: %d\tCurrent Time: %.fl&quot;, (int) prev_pos, tracker-&gt;current_time);
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger; 
   new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = new_passenger;
   
   // Update the system to reflect newly arrived passenger
   tracker-&gt;waiting_passengers++;
   stops[origin].num_waiting++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders) {   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next;  // make the next passenger the new head of the riders linked list
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = bus-&gt;riders;
         prev = bus-&gt;riders;
       } else {
         prev-&gt;next = cur-&gt;next;
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = prev-&gt;next;
       }
     } else { // If this branch executes, the current passenger isn't getting off
       prev = cur;
       cur = cur-&gt;next;
     }
   } // Proof-by-skitch: http://briandk.com/screenshots/UnloadPassengersFromBus-20111120-211338.png
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
     
     // Update the system to reflect loading the passenger on the bus
     tracker-&gt;waiting_passengers--;
     stops[bus-&gt;current_stop].num_waiting--;
     bus-&gt;number_of_passengers++;
   }
   
 }
 
 void PrintSummaryInformation() {
   fprintf(logFile, &quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   fprintf(logFile, &quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   fprintf(logFile, &quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }</code>
          </div>
          </pre>
        </td>
        <td id="d9677117d9bd92fc6b5935634dd76775fab94775">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Mon Nov 21 16:00:25 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">d9677117d</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="80,84"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w+&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 1;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }
 
 void RunSimulator() {
   while (!feof(passengerFile)            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
  fprintf(logFile, &quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
  fprintf(logFile, &quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
    fprintf(logFile, &quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   }
   
   if (!feof(passengerFile)) {
     // printf(&quot;\n\nResetting File Position to: %d\tCurrent Time: %.fl&quot;, (int) prev_pos, tracker-&gt;current_time);
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger; 
   new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = new_passenger;
   
   // Update the system to reflect newly arrived passenger
   tracker-&gt;waiting_passengers++;
   stops[origin].num_waiting++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders) {   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next;  // make the next passenger the new head of the riders linked list
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = bus-&gt;riders;
         prev = bus-&gt;riders;
       } else {
         prev-&gt;next = cur-&gt;next;
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = prev-&gt;next;
       }
     } else { // If this branch executes, the current passenger isn't getting off
       prev = cur;
       cur = cur-&gt;next;
     }
   } // Proof-by-skitch: http://briandk.com/screenshots/UnloadPassengersFromBus-20111120-211338.png
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
     
     // Update the system to reflect loading the passenger on the bus
     tracker-&gt;waiting_passengers--;
     stops[bus-&gt;current_stop].num_waiting--;
     bus-&gt;number_of_passengers++;
   }
   
 }
 
 void PrintSummaryInformation() {
   fprintf(logFile, &quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   fprintf(logFile, &quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   fprintf(logFile, &quot;Average passenger time:  %.2f\n&quot;, tracker-&gt;total_journey_length / tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }</code>
          </div>
          </pre>
        </td>
        <td id="a2d393d1b2862a0cc98bed4bbbf761246692173e">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Mon Nov 21 16:02:45 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">a2d393d1b</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="157"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w+&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 1;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }
 
 void RunSimulator() {
   while (!feof(passengerFile)            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
  fprintf(logFile, &quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
  fprintf(logFile, &quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
    fprintf(logFile, &quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   }
   
   if (!feof(passengerFile)) {
     // printf(&quot;\n\nResetting File Position to: %d\tCurrent Time: %.fl&quot;, (int) prev_pos, tracker-&gt;current_time);
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger; 
   new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = new_passenger;
   
   // Update the system to reflect newly arrived passenger
   tracker-&gt;waiting_passengers++;
   stops[origin].num_waiting++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders) {   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next;  // make the next passenger the new head of the riders linked list
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = bus-&gt;riders;
         prev = bus-&gt;riders;
       } else {
         prev-&gt;next = cur-&gt;next;
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = prev-&gt;next;
       }
     } else { // If this branch executes, the current passenger isn't getting off
       prev = cur;
       cur = cur-&gt;next;
     }
   } // Proof-by-skitch: http://briandk.com/screenshots/UnloadPassengersFromBus-20111120-211338.png
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   
   if (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
     
     // Update the system to reflect loading the passenger on the bus
     tracker-&gt;waiting_passengers--;
     stops[bus-&gt;current_stop].num_waiting--;
     bus-&gt;number_of_passengers++;
   }
   
 }
 
 void PrintSummaryInformation() {
   fprintf(logFile, &quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   fprintf(logFile, &quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   fprintf(logFile, &quot;Average passenger time:  %.2f\n&quot;, (tracker-&gt;total_journey_length + tracker-&gt;total_wait_time) / tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }</code>
          </div>
          </pre>
        </td>
        <td id="e9267e36604952079870874ce5ad7632bc2ce540">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Mon Nov 21 16:04:41 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">e9267e366</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="137"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator();
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator() {
   passengerFile = fopen(&quot;passenger.small.txt&quot;, &quot;r&quot;);
   logFile = fopen(&quot;output.txt&quot;, &quot;w+&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 1;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }
 
 void RunSimulator() {
   while (!feof(passengerFile)            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
  fprintf(logFile, &quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
  fprintf(logFile, &quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
    fprintf(logFile, &quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger; 
   new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = new_passenger;
   
   // Update the system to reflect newly arrived passenger
   tracker-&gt;waiting_passengers++;
   stops[origin].num_waiting++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders) {   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next;  // make the next passenger the new head of the riders linked list
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = bus-&gt;riders;
         prev = bus-&gt;riders;
       } else {
         prev-&gt;next = cur-&gt;next;
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = prev-&gt;next;
       }
     } else { // If this branch executes, the current passenger isn't getting off
       prev = cur;
       cur = cur-&gt;next;
     }
   } // Proof-by-skitch: http://briandk.com/screenshots/UnloadPassengersFromBus-20111120-211338.png
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   while (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
     
     // Update the system to reflect loading the passenger on the bus
     tracker-&gt;waiting_passengers--;
     stops[bus-&gt;current_stop].num_waiting--;
     bus-&gt;number_of_passengers++;
   }
   
 }
 
 void PrintSummaryInformation() {
   fprintf(logFile, &quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   fprintf(logFile, &quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   fprintf(logFile, &quot;Average passenger time:  %.2f\n&quot;, (tracker-&gt;total_journey_length + tracker-&gt;total_wait_time) / tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }</code>
          </div>
          </pre>
        </td>
        <td id="510ffe4dbd4b627fb5b0e213bf9f60362b3fc4b0">
          <div class="snapshotMetadata">
            <div class="timestamp">
              <time>Mon Nov 21 16:28:05 2011</time>
            </div>
            <div id="sha">
              <code><a class="shaLink" href="#">510ffe4db</a></code>
            </div>
          </div>
          <div class="codesnapshot">
            <pre class="language-clike" data-line="6,15,16,17"><code> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &quot;simulator.h&quot;
 
 int main (int argc, char const *argv[]) {
   InitializeSimulator(argv[1], argv[2]);
   RunSimulator();
   PrintSummaryInformation();
   TearDown();  
 
   return 0;
 }
 
 
 void InitializeSimulator(char const *input, char const *output) {
   passengerFile = fopen(input, &quot;r&quot;);
   logFile = fopen(output, &quot;w+&quot;);
   numberOfStops = GetNumberOfStops(passengerFile);
   stops = malloc(numberOfStops * sizeof(struct bus_stop));
   bus = malloc(sizeof(struct bus));
   bus-&gt;current_stop = 0;
   bus-&gt;number_of_passengers = 0;
   bus-&gt;riders = NULL;
   tracker = malloc(sizeof(struct system_tracker));
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
     stops[i].num_waiting = 0;
     stops[i].waiting = NULL;
   }
   tracker-&gt;current_time         = 1;
   tracker-&gt;total_passengers     = 0;
   tracker-&gt;total_wait_time      = 0;
   tracker-&gt;total_journey_length = 0;
   tracker-&gt;waiting_passengers   = 0;
 }
 
 int GetNumberOfStops (FILE *file) {
   char number_of_stops[100];
   int output;
   
   fgets(number_of_stops, 100, file);
   output = atoi(number_of_stops);
   return(output);
 }
 
 void RunSimulator() {
   while (!feof(passengerFile)            ||
          bus-&gt;number_of_passengers &gt; 0   ||
          tracker-&gt;waiting_passengers &gt; 0
   ) {
     PrintSystemState();
     ProcessArrivingPassengers();
     UnloadPassengers();
     LoadWaitingPassengers(&amp;stops[bus-&gt;current_stop]);
     bus-&gt;current_stop = (bus-&gt;current_stop + 1) % numberOfStops;
     tracker-&gt;current_time++;
   }
 }
 
 void PrintSystemState() {
  fprintf(logFile, &quot;*** TIME STEP = %.0f ***\n&quot;, tracker-&gt;current_time);
  fprintf(logFile, &quot;Bus: Bus Stop %d, passengers %d\n&quot;, bus-&gt;current_stop, bus-&gt;number_of_passengers);
   int i = 0;
   for (i = 0; i &lt; numberOfStops; i++) {
    fprintf(logFile, &quot;Bus Stop %d:  waiting %d\n&quot;, i, stops[i].num_waiting);
   }
 }
 
 void ProcessArrivingPassengers() {
   int origin = 0;
   int destination = 0;
   int arrival = 0;
   
   fgetpos(passengerFile, &amp;prev_pos);
   fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   
   while ((!feof(passengerFile)) &amp;&amp; (arrival == tracker-&gt;current_time)) {;
     AddArrivingPassengerToWaiting(origin, destination);
     fgetpos(passengerFile, &amp;prev_pos);
     fscanf(passengerFile, &quot;%d %d %d&quot;, &amp;arrival, &amp;origin, &amp;destination);
   }
   
   if (!feof(passengerFile)) {
     fsetpos(passengerFile, &amp;prev_pos);
   }
 
 }
 
 void AddArrivingPassengerToWaiting(int origin, int destination) {
   struct passenger *new_passenger; 
   new_passenger = (struct passenger*) malloc(sizeof(struct passenger));
   new_passenger-&gt;origin = origin;
   new_passenger-&gt;destination = destination;
   new_passenger-&gt;transit_time = (destination - origin + numberOfStops) % numberOfStops;
   new_passenger-&gt;wait_time = (origin - bus-&gt;current_stop + numberOfStops) % numberOfStops;
   new_passenger-&gt;next = stops[origin].waiting;
   stops[origin].waiting = new_passenger;
   
   // Update the system to reflect newly arrived passenger
   tracker-&gt;waiting_passengers++;
   stops[origin].num_waiting++;
 }
 
 void UnloadPassengers() {
   struct passenger *cur;
   struct passenger *prev;
   cur = bus-&gt;riders;
   prev = bus-&gt;riders;
   
   while (cur != NULL) {
     if (cur-&gt;destination == bus-&gt;current_stop) {
       // capture passenger stats
       tracker-&gt;total_journey_length += cur-&gt;transit_time;
       tracker-&gt;total_wait_time += cur-&gt;wait_time;
       tracker-&gt;total_passengers +=1;
       if (cur == bus-&gt;riders) {   // if the current passenger is the head of the riders linked list,
         bus-&gt;riders = cur-&gt;next;  // make the next passenger the new head of the riders linked list
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = bus-&gt;riders;
         prev = bus-&gt;riders;
       } else {
         prev-&gt;next = cur-&gt;next;
         free(cur);
         bus-&gt;number_of_passengers--;
         cur = prev-&gt;next;
       }
     } else { // If this branch executes, the current passenger isn't getting off
       prev = cur;
       cur = cur-&gt;next;
     }
   } // Proof-by-skitch: http://briandk.com/screenshots/UnloadPassengersFromBus-20111120-211338.png
 }
 
 void LoadWaitingPassengers(struct bus_stop *current_stop) {
   struct passenger *temp_ptr;
   while (current_stop-&gt;waiting != NULL) {
     temp_ptr = current_stop-&gt;waiting-&gt;next;
     current_stop-&gt;waiting-&gt;next = bus-&gt;riders;
     bus-&gt;riders = current_stop-&gt;waiting;
     current_stop-&gt;waiting = temp_ptr;
     
     // Update the system to reflect loading the passenger on the bus
     tracker-&gt;waiting_passengers--;
     stops[bus-&gt;current_stop].num_waiting--;
     bus-&gt;number_of_passengers++;
   }
   
 }
 
 void PrintSummaryInformation() {
   fprintf(logFile, &quot;Total sim time:  %.0f\n&quot;, tracker-&gt;current_time);
   fprintf(logFile, &quot;Total passengers:  %.0f\n&quot;, tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Passenger throughput:  %.2f\n&quot;,   tracker-&gt;total_passengers     / tracker-&gt;current_time);
   fprintf(logFile, &quot;Average passenger time:  %.2f\n&quot;, (tracker-&gt;total_journey_length + tracker-&gt;total_wait_time) / tracker-&gt;total_passengers);
   fprintf(logFile, &quot;Average wait time:  %.2f\n&quot;,      tracker-&gt;total_wait_time      / tracker-&gt;total_passengers);
 }
 
 void TearDown() {
   fclose(passengerFile);
   fclose(logFile);
 }</code>
          </div>
          </pre>
        </td>
    </tr>
  </table>
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <a class="brand" href="#">CodeTimeline</a>
      <ul class="nav">
        <li class="divider-vertical"></li>
        <li class="inactive toggleable" id="xrayToggle"><a href="#">X-Ray Mode</a></li>
        <li class="dropdown" id="zoomDropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Zoom<b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li class="nav-header">Zoom-out Level</li>
            <li class="zoomLevel disabled" id="zoom1x" data-zoom="1" class="disabled"><a href="#">1X</a></li>
            <li class="zoomLevel" id="zoom2x" data-zoom="2"><a href="#">2X</a></li>
            <li class="zoomLevel" id="zoom4x" data-zoom="4"><a href="#">4X</a></li>
            <li class="zoomLevel" id="zoom8x" data-zoom="8"><a href="#">8X</a></li>
            <li class="zoomLevel" id="zoom16x" data-zoom="16"><a href="#">16X</a></li>
          </ul></li>
        <li class="divider-vertical"></li>
        <li>
          <div class="pagination" id="pager">
            <ul>
              <li id="first-commit-btn"
                  class="pager-btn page-backward">
                  <a href="#">&laquo;</a></li>
              <li id="prev-commit-btn"
                  class="pager-btn page-backward"
                  data-counter-increment="-1">
                  <a href="#">&larr;</a></li>
              <li class="pager-btn disabled">
                <a href="#"><code id="shaDisplay">shaDisplay</code></a></li>
              <li id="next-commit-btn"
                  class="pager-btn page-forward"
                  data-counter-increment="+1">
                  <a href="#">&rarr;</a></li>
              <li id="last-commit-btn"
                  class="pager-btn page-forward">
                  <a href="#">&raquo;</a></li>
            </ul>
          </div>
        </li>
        <li class="divider-vertical"></li>
      </ul>
      <form class="navbar-form form-search" id="shaForm">
        <div class="input-append">
          <input type="text"
                 class="search-query span2"
                 id="shaSearch"
                 autocomplete="off"
                 placeholder="Type a SHA-1">
          <button type=""
                  class="btn"
                  id="goToSha">Go!</button>
        </div>
      </form>
    </div>
  </div>
  <script src="prism.js" type="text/javascript"></script>
  <script src="jQuery.js" type="text/javascript"></script>
  <script src="bootstrap.min.js" type="text/javascript"></script>
  <script type="text/javascript">
    var revisions = ["9956135f39f0f41385c261765774b10ab8164e21","a190e85d148394f0b23308904c6792cd68e882d9","cd6a2060bc45ff53b45fdb27474ba635d29a49e2","366d3b41239197b1ed2925cf9db340b1e0294b42","a823a42497bf130410694c3d469f1d9e3000d434","a5a480070870080875c6fd2dd8c046aaac469ac5","173eb5dbde1f6d33a81b61960405eac7ee91fc17","b8dfb27abfe2d76c25e49deff992f477e3737c1b","531b4fdeb8d426a69b214ef8cdb96c4bcffd4f82","13ef31b19c5fbb75f123e069ac95e738f178144b","2f8da8e1882b7357ec52f7b54249c7e2792cde5c","b0243c0ae25fe28d146ff9f9ab45fa52decf6511","785cbb1ad11cb0709ae288b43da40011d3c63666","8dafc4ebf1359114dbf2f5139ffc3d8b434a2c4a","b492bed5762cc71be2ac2403063d395680c11b07","34f80749511d8099e996a7516f4ab097499aa1ca","e12402e7065b4d414037d34556ff34ce647456ef","bebaa51cf059269df30a5f0aff06a56fe3e4bbfe","bf7ceaa19f36c32e250f6026105313b0b0a32f24","bd9a2eed52bbc6c8bbcc861cb3e797f9ceb15f1d","05110c5c72add801d1abb781ef03e5ee8894ec16","bddb1070f83944d0ea96d87a6628d1e889d39cdf","9a90819e9522e025ce0dd81039d78b9af58ee818","58cec8393aca2b5e1579e6bb59cc29027b3eb959","c9b8594982cf11599086ec8c00ed37f6998913a4","0b7ac4e8229bed79c46b406f60706ce119eb7a03","5b2eb7e29a5d8985097c2da02f3ff162c8f4a17f","714d8df617d8095ed96a88da3d1bddff129a0517","8a945f7411c484fe408d9c8168488ccda3f0bcb6","07f091abe798649e074832fe64c0f26668eb0a47","010f90d01e19f3b61b9dc352811aaa89e95804e9","ac965ac335a55f6e944cb2a09ecc7bc26ef57af5","1a985f680345946c827c56c25c90c1b82537de09","3875fbb9856bc7ba1da8f4370a119938a0592c01","b5417cc071c9106b06637c401d335eff38c584ab","38f4ba07f43230759cc867f7cbf317b17f3202b5","5afac7e6a6015ad89e543a588b9a1cdea0ff8ba5","9404a9ac1f9d1fef642b2772c85847de8cc08a9f","ad44673a09b86f4e260259513a378b992ead7c60","c922e56b99bbe310b624365a0542e4f795f2f2e6","4135117599d59d41be16f508543f386e16f70212","0f5393f935b8e318d02fc51db170eae13fc8c0e1","02b06b22df8c0db31001418650d9fbaef6fdbc41","00aad5eff79cf55a361d63a1a61d11048bb4c89b","f01f9b4c1486cfa063c750e7e8179b1215e96661","4497fc70a1b5fcd0cc50f230773fecda681f2fdc","143968dae8a96f1a44e182d72ab3b2ceacc176a9","354df5d80168fce1cfbdaf3edc04617520e8909e","f6c2ad9922e675756b55baca04aa9c9fa87c67f1","b333c0030a20a096e5aac9ab00db2cc22241456c","85cf4f442324ce81fd255841c3f44b2957a5b1db","8203757d361a0ab8107b14804a42fbb93a06a390","e978b3aa170577a0c76e9a9fd644697ba8dd6991","9ed782c32d1cf8d32b8c8cd59fce0502127dc089","1f0c8cbc1e81817ff47899ea5d47575e16f5e2c2","3d4dadca0ac6c777db2ac44d71e5f2e15fa25d64","ecf0b8d90a91046275d4c21333afe8f182b42006","235d4798c88c1bbb63e33788d810e7dbb11aacb3","204db47d5c5972a2f20ba56c90217f76c5ae8b9a","e7003f7248276d887b647a0e1bbeb9c4c6512010","030bf10f54e2a8ee5631740d3e1ab6d47d2d09dd","4c78af418be3a0caeea1317518fd4eb608670658","d9677117d9bd92fc6b5935634dd76775fab94775","a2d393d1b2862a0cc98bed4bbbf761246692173e","e9267e36604952079870874ce5ad7632bc2ce540","510ffe4dbd4b627fb5b0e213bf9f60362b3fc4b0"];
  </script>
  <script src="Timeline.js" type="text/javascript"></script>
</body>
</html>
